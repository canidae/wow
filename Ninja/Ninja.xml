<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">
	<Script file="Ninja.lua" />
	<Frame name="NinjaConfigFrame">
		<Frames>
			<CheckButton name="NinjaEnabledCheckButton" inherits="ChatConfigCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="10" y="-10" />
						</Offset>
					</Anchor>
				</Anchors>
				<HitRectInsets>
					<AbsInset left="0" right="-55" top="0" bottom="0"/>
				</HitRectInsets>
				<Scripts>
					<OnLoad>
						getglobal(self:GetName() .. "Text"):SetText("Enabled")
						self.tooltip = "Automatically roll on items"
					</OnLoad>
				</Scripts>
			</CheckButton>
			<Slider name="NinjaRollWaitTimeSlider" inherits="OptionsSliderTemplate">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="10" y="-45" />
						</Offset>
					</Anchor>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-10" y="-45" />
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						getglobal(self:GetName() .. "Low"):SetText("0")
						getglobal(self:GetName() .. "High"):SetText("19")
						self:SetValueStep(0.1)
						self:SetMinMaxValues(0, 19)
					</OnLoad>
					<OnValueChanged>
						local waittime = math.floor(self:GetValue() * 10 + 0.5) / 10
						local msg = "Roll wait: " .. waittime .. " second"
						if waittime ~= 1 then
							msg = msg .. "s"
						end
						getglobal(self:GetName() .. "Text"):SetText(msg)
					</OnValueChanged>
					<OnEnter>
						GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
						GameTooltip:SetText("Time to wait before rolling on items. Keep in mind that roll time is (usually) 60 seconds, and that only 4 items are rolled for at the same time. Too high setting means rolls will time out, with 19 seconds roll time then 13 rolls needs to be started at the same time for the last roll to time out. There will also be at least half a second between each roll to avoid triggering a bug with the BoP/disenchant warning.", nil, nil, nil, nil, 1)
					</OnEnter>
					<OnLeave>
						GameTooltip:Hide()
					</OnLeave>
				</Scripts>
			</Slider>
			<Frame name="NinjaCodeHelpFrame">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="NinjaRollWaitTimeSlider" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-10" />
						</Offset>
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-10" y="10" />
						</Offset>
					</Anchor>
				</Anchors>
				<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
					<BackGroundInsets>
						<AbsInset left="5" right="5" top="5" bottom="5" />
					</BackGroundInsets>
					<TileSize>
						<AbsValue val="16"/>
					</TileSize>
					<EdgeSize>
						<AbsValue val="16"/>
					</EdgeSize>
				</Backdrop>
				<Layers>
					<Layer level="BORDER">
						<FontString name="$parentText" inherits="GameFontHighlightSmall" justifyH="LEFT" justifyV="TOP">
							<Anchors>
								<Anchor point="TOPLEFT">
									<Offset>
										<AbsDimension x="8" y="-8" />
									</Offset>
								</Anchor>
								<Anchor point="BOTTOMRIGHT">
									<Offset>
										<AbsDimension x="-8" y="8" />
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.name = "Ninja"
				InterfaceOptions_AddCategory(self)
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="NinjaRollCodeFrameTemplate" virtual="true">
		<Layers>
			<Layer level="BORDER">
				<FontString name="$parentDescriptionText" inherits="GameFontHighlightSmall" justifyH="LEFT" justifyV="CENTER">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="10" y="-10" />
							</Offset>
						</Anchor>
						<Anchor point="TOPRIGHT">
							<Offset>
								<AbsDimension x="-10" y="-10" />
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<EditBox name="$parentCode" multiLine="true" autoFocus="false">
				<FontString inherits="ChatFontNormal" />
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentDescriptionText" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-5" />
						</Offset>
					</Anchor>
					<Anchor point="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-10" y="10" />
						</Offset>
					</Anchor>
				</Anchors>
				<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
					<BackGroundInsets>
						<AbsInset left="5" right="5" top="5" bottom="5" />
					</BackGroundInsets>
					<TileSize>
						<AbsValue val="16"/>
					</TileSize>
					<EdgeSize>
						<AbsValue val="16"/>
					</EdgeSize>
				</Backdrop>
				<TextInsets>
					<AbsInset left="5" right="5" top="5" bottom="5" />
				</TextInsets>
				<Scripts>
					<OnEscapePressed>
						self:ClearFocus()
					</OnEscapePressed>
				</Scripts>
			</EditBox>
		</Frames>
	</Frame>
	<Frame name="NinjaConfigNoneCodeFrame" inherits="NinjaRollCodeFrameTemplate">
		<Scripts>
			<OnLoad>
				self.name = "None"
				self.parent = "Ninja"
				self.okay = Ninja.SaveSettings
				self.cancel = Ninja.LoadSettings
				InterfaceOptions_AddCategory(self)

				getglobal(self:GetName() .. "DescriptionText"):SetText("Code for items Ninja should not automatically roll on.")
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="NinjaConfigNeedCodeFrame" inherits="NinjaRollCodeFrameTemplate">
		<Scripts>
			<OnLoad>
				self.name = "Need"
				self.parent = "Ninja"
				InterfaceOptions_AddCategory(self)

				getglobal(self:GetName() .. "DescriptionText"):SetText("Code for items Ninja should automatically roll need on.")
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="NinjaConfigGreedCodeFrame" inherits="NinjaRollCodeFrameTemplate">
		<Scripts>
			<OnLoad>
				self.name = "Greed"
				self.parent = "Ninja"
				InterfaceOptions_AddCategory(self)

				getglobal(self:GetName() .. "DescriptionText"):SetText("Code for items Ninja should automatically roll greed on.")
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="NinjaConfigDisenchantCodeFrame" inherits="NinjaRollCodeFrameTemplate">
		<Scripts>
			<OnLoad>
				self.name = "Disenchant"
				self.parent = "Ninja"
				InterfaceOptions_AddCategory(self)

				getglobal(self:GetName() .. "DescriptionText"):SetText("Code for items Ninja should automatically roll disenchant on.")
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="NinjaConfigPassCodeFrame" inherits="NinjaRollCodeFrameTemplate">
		<Scripts>
			<OnLoad>
				self.name = "Pass"
				self.parent = "Ninja"
				InterfaceOptions_AddCategory(self)

				getglobal(self:GetName() .. "DescriptionText"):SetText("Code for items Ninja should automatically pass on.")
			</OnLoad>
		</Scripts>
	</Frame>
</Ui>
